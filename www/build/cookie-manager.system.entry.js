var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):r(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(o=s[0]&2?r["return"]:s[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;if(r=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1];o=s;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(s);break}if(o[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(a){s=[6,a];r=0}finally{i=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./index-e78d0dfe.system.js","./view-state-19a56002.system.js"],(function(e){"use strict";var t,n,i,r,o,s,a,l,c,u,d,f;return{setters:[function(e){t=e.r;n=e.h;i=e.g},function(e){r=e.d;o=e.a;s=e.V;a=e.L;l=e.S;c=e.C;u=e.b;d=e.J;f=e.I}],execute:function(){"use strict";var h=function e(t){return g(t)&&!v(t)};function g(e){return!!e&&typeof e==="object"}function v(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||y(e)}var b=typeof Symbol==="function"&&Symbol.for;var p=b?Symbol.for("react.element"):60103;function y(e){return e.$$typeof===p}function m(e){return Array.isArray(e)?[]:{}}function w(e,t){return t.clone!==false&&t.isMergeableObject(e)?U(m(e),e,t):e}function k(e,t,n){return e.concat(t).map((function(e){return w(e,n)}))}function _(e,t){if(!t.customMerge){return U}var n=t.customMerge(e);return typeof n==="function"?n:U}function C(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}function M(e){return Object.keys(e).concat(C(e))}function S(e,t){try{return t in e}catch(n){return false}}function A(e,t){return S(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function L(e,t,n){var i={};if(n.isMergeableObject(e)){M(e).forEach((function(t){i[t]=w(e[t],n)}))}M(t).forEach((function(r){if(A(e,r)){return}if(S(e,r)&&n.isMergeableObject(t[r])){i[r]=_(r,n)(e[r],t[r],n)}else{i[r]=w(t[r],n)}}));return i}function U(e,t,n){n=n||{};n.arrayMerge=n.arrayMerge||k;n.isMergeableObject=n.isMergeableObject||h;n.cloneUnlessOtherwiseSpecified=w;var i=Array.isArray(t);var r=Array.isArray(e);var o=i===r;if(!o){return w(t,n)}else if(i){return n.arrayMerge(e,t,n)}else{return L(e,t,n)}}U.all=function e(t,n){if(!Array.isArray(t)){throw new Error("first argument should be an array")}return t.reduce((function(e,t){return U(e,t,n)}),{})};var O=U;var j=O;var V="";var E=e("cookie_manager",function(){function e(e){t(this,e);this.consents=[r,o];this.viewState=s.InitialView;this.currentLocale=undefined;this.uiTextContent=undefined;this.jsonConfiguration=undefined;this.visible=false;this.logging="warn";this.jsonConfigTag="consent-kit-settings";this.locale=undefined;this.fallbackLocale="en-us";this.linkUrlComfort=undefined;this.linkUrlMarketing=undefined;this.linkUrlPolicy=undefined;this.linkUrlImprint=undefined;this.cookieName="bosch-privacy-v3";this.disableConsentComfort=false;this.disableConsentMarketing=false}e.prototype.validateAndSetLogLevel=function(e){if(a.isOfTypeLogLevelDesc(e)){a.log.setLevel("info");a.log.info("Set log level to:",e);a.log.setLevel(e)}else if(e!==null){a.log.setLevel("warn");a.log.warn("Log level is incorrect, fallback to 'silent'");a.log.setLevel("silent")}};e.prototype.validateAndSetLocale=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:a.log.info("Apply changed locale:",e);return[4,this.fetchAndChangeLanguage(e)];case 1:t.sent();return[2]}}))}))};e.prototype.setComfortLink=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getModalView()];case 1:t=n.sent();a.log.info("Apply changed comfort link address:",e);return[4,t.updateUi(this.consents,undefined,e,this.linkUrlMarketing)];case 2:n.sent();return[2]}}))}))};e.prototype.setMarketingLink=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getModalView()];case 1:t=n.sent();a.log.info("Apply changed marketing link address:",e);return[4,t.updateUi(this.consents,undefined,this.linkUrlComfort,e)];case 2:n.sent();return[2]}}))}))};e.prototype.setPolicyLink=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getModalView()];case 1:t=n.sent();a.log.info("Apply changed policy link address:",e);return[4,t.updateUi(this.consents,this.uiTextContent,this.linkUrlComfort,this.linkUrlMarketing,e,this.linkUrlImprint)];case 2:n.sent();return[2]}}))}))};e.prototype.setImprintLink=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getModalView()];case 1:t=n.sent();a.log.info("Apply changed imprint link address:",e);return[4,t.updateUi(this.consents,this.uiTextContent,this.linkUrlComfort,this.linkUrlMarketing,this.linkUrlPolicy,e)];case 2:n.sent();return[2]}}))}))};e.prototype.removeOrAddConsentComfort=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(e){this.consents=this.removeDisabledStandardConsentsFromAllConsents(this.consents);a.log.debug("Disabled standard consent '"+l.Comfort+"'")}else if(!this.consents.includes(r)){this.consents.unshift(r);a.log.debug("Enabled standard consent '"+l.Comfort+"'")}return[4,this.getModalView()];case 1:t=n.sent();return[4,t.updateUi(this.consents,this.uiTextContent,undefined,undefined,undefined,undefined,undefined,e,this.disableConsentMarketing)];case 2:n.sent();return[2]}}))}))};e.prototype.removeOrAddConsentMarketing=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(e){this.consents=this.removeDisabledStandardConsentsFromAllConsents(this.consents);a.log.debug("Disabled standard consent '"+l.Marketing+"'")}else if(!this.consents.includes(o)){if(this.consents.length>0&&this.consents[0].name===l.Comfort){this.consents.splice(1,0,o)}else{this.consents.unshift(o)}a.log.debug("Enabled standard consent '"+l.Marketing+"'")}return[4,this.getModalView()];case 1:t=n.sent();return[4,t.updateUi(this.consents,this.uiTextContent,undefined,undefined,undefined,undefined,undefined,this.disableConsentComfort,e)];case 2:n.sent();return[2]}}))}))};e.prototype.modalShowEventHandler=function(e){a.log.debug(e)};e.prototype.modalHideEventHandler=function(e){a.log.debug(e)};e.prototype.changeToPrivacySettingsLinkEditViewEventHandler=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:a.log.debug("Clicked privacy 'settings'",e);return[4,this.getModalView()];case 1:t=n.sent();this.viewState=s.EditView;return[4,t.updateUi(this.consents,this.uiTextContent,undefined,undefined,undefined,undefined,s.EditView)];case 2:n.sent();return[2]}}))}))};e.prototype.saveAcceptAllEventHandler=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:a.log.debug("Clicked 'Accept All':",e);return[4,c.storeConsents(this.consents,[u.Cookie],this.cookieName,this.currentLocale)];case 1:t.sent();return[4,this.setModalVisibilityAndState(false,s.EditView)];case 2:t.sent();return[2]}}))}))};e.prototype.saveCurrentSelectionEventHandler=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:a.log.debug("Clicked 'Save'",e);return[4,c.storeConsents(this.consents,[u.Cookie],this.cookieName,this.currentLocale)];case 1:t.sent();return[4,this.setModalVisibilityAndState(false,s.EditView)];case 2:t.sent();return[2]}}))}))};e.prototype.checkboxToggleModalEventHandler=function(e){a.log.debug(e);this.consents=this.consents.map((function(t){return t.name===e.detail.name?{name:t.name,userConsents:e.detail.userConsents}:t}))};e.prototype.render=function(){return n("div",null,n("span",{slot:"content"}),n("modal-view",{show:this.visible}))};e.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.jsonConfiguration=d.getConfiguration(this.jsonConfigTag);return[2]}))}))};e.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:a.log.setLevel(this.logging);a.log.info("The cookie manager was loaded");a.log.debug("The standard consent link values are:",this.linkUrlComfort,this.linkUrlMarketing);e=u.Cookie;return[4,c.restoreConsents([e],this.cookieName)];case 1:t=i.sent();return[4,this.checkConsentAvailabilityAndSetModalVisibilityAndState(t)];case 2:n=i.sent();this.consents=this.removeDisabledStandardConsentsFromAllConsents(n);a.log.debug("The cookie manager is visible:",this.visible);return[4,this.setLocaleFromSelectedStorageData(t,e)];case 3:i.sent();return[2]}}))}))};e.prototype.fetchAndChangeLanguage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:a.log.debug("Given locale is:",e);t=f.getLocale(this.fallbackLocale,this.element,e);this.currentLocale=t;return[4,f.fetchI18n(t).then((function(e){return __awaiter(n,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:a.log.debug("Successfully requested the locale content:",e);this.uiTextContent=e;if(this.jsonConfiguration&&this.jsonConfiguration.i18nOverride&&this.currentLocale in this.jsonConfiguration.i18nOverride){this.uiTextContent=j(e,this.jsonConfiguration.i18nOverride[this.currentLocale]);a.log.debug("Overriding locale '"+this.currentLocale+"' texts with selected JSON configuration texts:",this.jsonConfiguration.i18nOverride[this.currentLocale])}return[4,this.getModalView()];case 1:t=n.sent();return[4,t.updateUi(this.consents,this.uiTextContent,this.linkUrlComfort,this.linkUrlMarketing,this.linkUrlPolicy,this.linkUrlImprint,this.viewState,this.disableConsentComfort,this.disableConsentMarketing)];case 2:n.sent();return[2]}}))}))})).catch((function(e){a.log.error(e)}))];case 1:i.sent();return[2]}}))}))};e.prototype.setLocaleFromSelectedStorageData=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n=e.storageData.find((function(e){return e.storageType===t}));if(!(n&&n.locale))return[3,1];a.log.debug("Retrieved locale from cookie storage:",n.locale);this.locale=n.locale;return[3,3];case 1:return[4,this.fetchAndChangeLanguage(this.locale)];case 2:i.sent();i.label=3;case 3:return[2]}}))}))};e.prototype.removeDisabledStandardConsentsFromAllConsents=function(e){var t=[];for(var n=0,i=e;n<i.length;n++){var r=i[n];if(!(this.disableConsentComfort&&r.name===l.Comfort||this.disableConsentMarketing&&r.name===l.Marketing)){t.push(r)}}return t};e.prototype.setModalVisibilityAndState=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:a.log.debug("Set modal visible and modal state:",e,t);this.visible=e;this.viewState=t;return[4,this.getModalView()];case 1:n=i.sent();return[4,n.updateUi(this.consents,this.uiTextContent,undefined,undefined,undefined,undefined,this.viewState)];case 2:i.sent();return[2]}}))}))};e.prototype.checkConsentAvailabilityAndSetModalVisibilityAndState=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this.consents;if(!(e.consents.length>0))return[3,2];t=e.consents;return[4,this.setModalVisibilityAndState(false,s.EditView)];case 1:n.sent();return[3,4];case 2:return[4,this.setModalVisibilityAndState(true,s.InitialView)];case 3:n.sent();n.label=4;case 4:return[2,t]}}))}))};e.prototype.getModalView=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,customElements.whenDefined("modal-view")];case 1:e.sent();return[2,this.element.shadowRoot.querySelector("modal-view")]}}))}))};Object.defineProperty(e.prototype,"element",{get:function(){return i(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{logging:["validateAndSetLogLevel"],locale:["validateAndSetLocale"],linkUrlComfort:["setComfortLink"],linkUrlMarketing:["setMarketingLink"],linkUrlPolicy:["setPolicyLink"],linkUrlImprint:["setImprintLink"],disableConsentComfort:["removeOrAddConsentComfort"],disableConsentMarketing:["removeOrAddConsentMarketing"]}},enumerable:false,configurable:true});return e}());E.style=V}}}));